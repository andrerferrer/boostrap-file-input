<%= simple_form_for @restaurant do |f| %>
  <%= f.input :name %>
  <%= f.input :address %>
  <%= f.input :photo, as: :file %>
  <div id="preview"></div>

  <%= f.submit %>
<% end %>

<script>
  // Find the photo input
  const photoInput = document.getElementById('restaurant_photo');
  // add an Event Listener on it
  photoInput.addEventListener('change', (event) => {
    // When a change happens, find the files in the input
    const files = event.target.files;
    console.log(files)
    const image = files[0]
    const reader = new FileReader();
    reader.onload = (file) => {
      const imgSrc = file.target.result;
      const img = `<img src='${imgSrc}'>`
      document.getElementById('preview').innerHTML = img
    }
    reader.readAsDataURL(image);
    console.log(files);
  });
</script>

<%# <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>

  function showImage(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#your_preview_id')
            .attr('src', e.target.result)
            .width(150)
            .height(200);
        };

        reader.readAsDataURL(input.files[0]);
      }
    }

    
    $('#restaurant_photo').on('change', function() {
        showImage(this);
    })

</script> %>

<%# https://stackoverflow.com/questions/53877660/looking-to-display-picture-on-upload-in-rails %>
<%# https://stackoverflow.com/questions/61158176/how-to-display-a-tempfile-image-in-views-with-rails-active-storage %>
<%# https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded %>